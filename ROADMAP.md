# 眼窩外眼筋セグメンテーションプロジェクト - 今後のロードマップ

更新日: 2026-02-07

---

## 1. 面積データの保存機能

**目的**: 体積だけでなく、スライスごとの断面積データも記録

- [ ] 重要なスライスを自動選定するロジックの実装（例: 最大断面積のスライスなど）
- [ ] 断面積データのCSV/JSON出力機能
- [ ] 撮影1回あたり15枚程度から必要なスライスのみ保存し容量削減

---

## 2. MRI自動取り込み・自動処理

**目的**: 院内ネットワーク経由で転送されたMRIデータを自動検出し処理

- [ ] 監視対象フォルダを設定（DICOM受信フォルダ）
- [ ] 新規DICOM検出時に自動でセグメンテーション実行
- [ ] 結果を自動でGUIに表示 or 通知
- [ ] 現在の手動フォルダ選択から自動ワークフローへの移行

---

## 3. アノテーションツールの完成・exe化

**目的**: 誰でも使いやすいスタンドアロン版を提供

- [ ] UIの改善（直感的な操作性）
- [ ] 保存形式の標準化（JSON/NIfTI）
- [ ] PyInstallerでのexe化
- [ ] インストール不要で動作する配布パッケージ作成

---

## 4. セグメンテーションツールとアノテーションツールの連携・統合

**目的**: AIセグメンテーション結果のチェック→修正→再学習のサイクルを効率化

- [ ] AIセグメンテーション結果をアノテーションツールで直接編集可能に
- [ ] 修正したデータを再学習用に自動フォーマット
- [ ] 統合GUI（1つのアプリで推論・確認・修正が完結）
- [ ] Active Learning対応（不確実なケースを優先的にレビュー）

---

## 5. 追加提案

### 5.1 レポート自動生成
- [ ] 測定結果からPDF/HTMLレポートを自動生成
- [ ] 患者情報・測定値・可視化画像を含む標準レポート
- [ ] 左右差の自動算出と異常値ハイライト

### 5.2 データベース連携
- [ ] CSVからSQLiteまたはPostgreSQLへの移行
- [ ] 患者ID・検査日での検索機能
- [ ] 経時変化のトラッキング（同一患者の前回との比較）

### 5.3 クラウドバックアップ
- [ ] ローカルデータのクラウド同期（オプション）
- [ ] 複数施設でのデータ共有基盤

### 5.4 モデルバージョン管理
- [ ] nnU-Netモデルのバージョン管理
- [ ] 結果CSVにモデルバージョンを記録
- [ ] モデル更新時の影響評価機能

### 5.5 検証・品質管理
- [ ] セグメンテーション品質スコアの自動計算
- [ ] 異常検出（セグメンテーション失敗の自動検知）
- [ ] 定期的な精度評価レポート

---

## 優先度の目安

| 優先度 | 項目 | 理由 |
|--------|------|------|
| **高** | アノテーションツールexe化 | 他のスタッフも使用可能にするため |
| **高** | ツール連携・統合 | 再学習サイクルの効率化 |
| **中** | 面積データ保存 | 臨床的に有用な追加情報 |
| **中** | MRI自動取り込み | ワークフロー効率化 |
| **低** | レポート生成 | 現状CSVで対応可能 |
| **低** | データベース連携 | データ量が増えてから検討 |
